# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –í–´–õ–ï–¢–ê –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø –ü–†–ò –û–ë–ù–û–í–õ–ï–ù–ò–ò –°–¢–†–ê–ù–ò–¶–´

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã (F5, Ctrl+R) –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–ª–µ—Ç–∞–µ—Ç –∏–∑ —Å–∏—Å—Ç–µ–º—ã  
**–ü—Ä–∏—á–∏–Ω–∞:** AuthContext —É–¥–∞–ª—è–ª —Ç–æ–∫–µ–Ω –ø—Ä–∏ –ª—é–±—ã—Ö –æ—à–∏–±–∫–∞—Ö –ø—Ä–æ–≤–µ—Ä–∫–∏  
**–†–µ—à–µ–Ω–∏–µ:** –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–π –ø–æ–¥—Ö–æ–¥ - —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Ç–æ–∫–µ–Ω –ø—Ä–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ—à–∏–±–∫–∞—Ö

---

## üêõ –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ü–†–û–ë–õ–ï–ú–´

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ:

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Å–∏—Å—Ç–µ–º–µ ‚úÖ
2. –ù–∞–∂–∏–º–∞–µ—Ç **F5** –∏–ª–∏ **Ctrl+R** (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã)
3. AuthContext –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–∫–µ–Ω —á–µ—Ä–µ–∑ `/api/auth/me`
4. –ï—Å–ª–∏ API –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –∏–ª–∏ –æ—à–∏–±–∫–∞ ‚Üí **—É–¥–∞–ª—è–µ—Ç —Ç–æ–∫–µ–Ω** ‚ùå
5. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–ª–µ—Ç–∞–µ—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤—Ö–æ–¥–∞ ‚ùå

### –ü–æ—á–µ–º—É —Ç–∞–∫ –±—ã–ª–æ:

```javascript
// –°–¢–ê–†–´–ô –ö–û–î –≤ AuthContext.jsx
const checkAuthStatus = async () => {
  const isValid = await validateToken();
  if (isValid) {
    // OK
  } else {
    clearAuth();  // ‚ùå –£–¥–∞–ª—è–µ—Ç —Ç–æ–∫–µ–Ω –ø—Ä–∏ –õ–Æ–ë–û–ô –æ—à–∏–±–∫–µ!
  }
};

// –°–¢–ê–†–´–ô –ö–û–î –≤ auth.js
export const validateToken = async () => {
  try {
    const response = await getCurrentUser();
    return response.success && response.user;
  } catch (error) {
    removeAuthToken();  // ‚ùå –£–¥–∞–ª—è–µ—Ç —Ç–æ–∫–µ–Ω –ø—Ä–∏ —Å–µ—Ç–µ–≤—ã—Ö –æ—à–∏–±–∫–∞—Ö!
    return false;
  }
};
```

---

## ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### 1. –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞

**–§–∞–π–ª:** `src/api/auth.js`

**–ù–û–í–´–ô –ö–û–î:**
```javascript
export const validateToken = async () => {
  try {
    const token = getAuthToken();
    if (!token) {
      return false;  // –¢–æ–∫–µ–Ω–∞ –Ω–µ—Ç - –≤—ã—Ö–æ–¥–∏–º
    }
    
    const response = await getCurrentUser();
    return response.success && response.user;
  } catch (error) {
    // –ù–ï —É–¥–∞–ª—è–µ–º —Ç–æ–∫–µ–Ω –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö —Å–µ—Ç–∏!
    console.warn('‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–æ–∫–µ–Ω–∞ (–≤–æ–∑–º–æ–∂–Ω–æ –≤—Ä–µ–º–µ–Ω–Ω–∞—è)');
    
    // –ï—Å–ª–∏ —Ç–æ–∫–µ–Ω –µ—Å—Ç—å, –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º —á—Ç–æ –æ–Ω –≤–∞–ª–∏–¥–µ–Ω
    // –†–µ–∞–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –ø—Ä–∏ –ø–µ—Ä–≤–æ–º API –∑–∞–ø—Ä–æ—Å–µ
    return !!getAuthToken();  // ‚úÖ –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–π –ø–æ–¥—Ö–æ–¥
  }
};
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ù–µ —É–¥–∞–ª—è–µ—Ç —Ç–æ–∫–µ–Ω –ø—Ä–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–µ—Ç–µ–≤—ã—Ö –æ—à–∏–±–∫–∞—Ö
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Å—Ç–∞–µ—Ç—Å—è –≤ —Å–∏—Å—Ç–µ–º–µ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- ‚úÖ –†–µ–∞–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –ø—Ä–∏ –ø–µ—Ä–≤–æ–º API –∑–∞–ø—Ä–æ—Å–µ
- ‚úÖ 401 –æ—à–∏–±–∫–∏ –≤—Å–µ —Ä–∞–≤–Ω–æ —É–¥–∞–ª—è—Ç —Ç–æ–∫–µ–Ω (–≤ apiRequest)

---

### 2. –£–ª—É—á—à–µ–Ω–Ω—ã–π checkAuthStatus

**–§–∞–π–ª:** `src/contexts/AuthContext.jsx`

**–ù–û–í–´–ô –ö–û–î:**
```javascript
const checkAuthStatus = async () => {
  setIsLoading(true);
  try {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –µ—Å—Ç—å –ª–∏ —Ç–æ–∫–µ–Ω –≤ localStorage
    const token = localStorage.getItem('authToken');
    if (!token) {
      clearAuth();  // –¢–æ–∫–µ–Ω–∞ –Ω–µ—Ç - –æ—á–∏—â–∞–µ–º
      return;
    }
    
    // –ü—ã—Ç–∞–µ–º—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    try {
      const response = await getCurrentUser();
      if (response.success && response.user) {
        setUser(response.user);
        setIsAuthenticated(true);
      } else {
        // –ù–ï —É–¥–∞–ª—è–µ–º —Ç–æ–∫–µ–Ω —Å—Ä–∞–∑—É!
        console.warn('‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ, –Ω–æ —Ç–æ–∫–µ–Ω –µ—Å—Ç—å');
        setIsAuthenticated(true);  // ‚úÖ –°—á–∏—Ç–∞–µ–º –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º
      }
    } catch (error) {
      // –ü—Ä–∏ –æ—à–∏–±–∫–µ —Å–µ—Ç–∏ - –ù–ï —É–¥–∞–ª—è–µ–º —Ç–æ–∫–µ–Ω!
      console.warn('‚ö†Ô∏è –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ (–≤–æ–∑–º–æ–∂–Ω–æ –≤—Ä–µ–º–µ–Ω–Ω–∞—è)');
      setIsAuthenticated(true);  // ‚úÖ –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ
    }
  } finally {
    setIsLoading(false);
  }
};
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç localStorage –Ω–∞–ø—Ä—è–º—É—é
- ‚úÖ –ù–µ —É–¥–∞–ª—è–µ—Ç —Ç–æ–∫–µ–Ω –ø—Ä–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ—à–∏–±–∫–∞—Ö
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤—ã–ª–µ—Ç–∞–µ—Ç –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

---

### 3. –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞

**–¢–æ–∫–µ–Ω —É–¥–∞–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏:**

1. **–†–µ–∞–ª—å–Ω–æ–π 401 –æ—à–∏–±–∫–µ** (–≤ `apiRequest()` - —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
2. **–Ø–≤–Ω–æ–º logout** (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∞–ª –≤—ã—Ö–æ–¥)
3. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ç–æ–∫–µ–Ω–∞** –≤ localStorage

**–¢–æ–∫–µ–Ω –ù–ï —É–¥–∞–ª—è–µ—Ç—Å—è –ø—Ä–∏:**
- ‚ùå –í—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–µ—Ç–µ–≤—ã—Ö –æ—à–∏–±–∫–∞—Ö
- ‚ùå –¢–∞–π–º–∞—É—Ç–∞—Ö API
- ‚ùå –û—à–∏–±–∫–∞—Ö CORS
- ‚ùå –û–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

---

## üéØ –†–ï–ó–£–õ–¨–¢–ê–¢

### –î–û –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É (F5)
2. ‚ùå –í—ã–ª–µ—Ç–∞–µ—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤—Ö–æ–¥–∞
3. ‚ùå –ù—É–∂–Ω–æ –≤–≤–æ–¥–∏—Ç—å –ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å –∑–∞–Ω–æ–≤–æ

### –ü–û–°–õ–ï –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É (F5)
2. ‚úÖ –û—Å—Ç–∞–µ—Ç—Å—è –≤ —Å–∏—Å—Ç–µ–º–µ
3. ‚úÖ –¢–æ–∫–µ–Ω —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ localStorage
4. ‚úÖ –†–∞–±–æ—Ç–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –±–µ–∑ –ø–µ—Ä–µ—Ä—ã–≤–∞

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### –ü—Ä–æ–≤–µ—Ä–∫–∞ #1: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

1. –í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É
2. –û—Ç–∫—Ä–æ–π—Ç–µ –ª—é–±—É—é –≤–∫–ª–∞–¥–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–†–∞—Å—á–µ—Ç —Å–º–µ—Ç—ã")
3. –ù–∞–∂–º–∏—Ç–µ **F5** –∏–ª–∏ **Ctrl+R**
4. ‚úÖ –î–æ–ª–∂–Ω—ã –æ—Å—Ç–∞—Ç—å—Å—è –≤ —Å–∏—Å—Ç–µ–º–µ!
5. ‚úÖ –í–∫–ª–∞–¥–∫–∞ –¥–æ–ª–∂–Ω–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è –∑–∞–Ω–æ–≤–æ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ #2: –ñ–µ—Å—Ç–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

1. –ù–∞—Ö–æ–¥—è—Å—å –≤ —Å–∏—Å—Ç–µ–º–µ
2. –ù–∞–∂–º–∏—Ç–µ **Ctrl+Shift+R** (–æ—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞)
3. ‚úÖ –î–æ–ª–∂–Ω—ã –æ—Å—Ç–∞—Ç—å—Å—è –≤ —Å–∏—Å—Ç–µ–º–µ!

### –ü—Ä–æ–≤–µ—Ä–∫–∞ #3: –ó–∞–∫—Ä—ã—Ç–∏–µ –∏ –æ—Ç–∫—Ä—ã—Ç–∏–µ –≤–∫–ª–∞–¥–∫–∏

1. –í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É
2. –ó–∞–∫—Ä–æ–π—Ç–µ –≤–∫–ª–∞–¥–∫—É –±—Ä–∞—É–∑–µ—Ä–∞
3. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3000 —Å–Ω–æ–≤–∞
4. ‚úÖ –î–æ–ª–∂–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ–π—Ç–∏ (—Ç–æ–∫–µ–Ω –≤ localStorage)

---

## üìä –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–ê–Ø –ó–ê–©–ò–¢–ê

### –í apiRequest —É–∂–µ –µ—Å—Ç—å –∞–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–∏ 401:

```javascript
if (!response.ok) {
  // –ï—Å–ª–∏ —Ç–æ–∫–µ–Ω –Ω–µ–≤–∞–ª–∏–¥–µ–Ω (401), —É–¥–∞–ª—è–µ–º –µ–≥–æ
  if (response.status === 401 && token) {
    console.warn('‚ö†Ô∏è –¢–æ–∫–µ–Ω –Ω–µ–≤–∞–ª–∏–¥–µ–Ω –∏–ª–∏ –∏—Å—Ç–µ–∫, —É–¥–∞–ª—è–µ–º –ª–æ–∫–∞–ª—å–Ω–æ');
    removeAuthToken();
  }
  throw new Error(...);
}
```

**–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:**
- ‚úÖ –ü—Ä–∏ —Ä–µ–∞–ª—å–Ω–æ–π 401 –æ—à–∏–±–∫–µ —Ç–æ–∫–µ–Ω —É–¥–∞–ª–∏—Ç—Å—è
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±—É–¥–µ—Ç –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –≤—Ö–æ–¥
- ‚úÖ –ù–æ –Ω–µ –ø—Ä–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–µ—Ç–µ–≤—ã—Ö –ø—Ä–æ–±–ª–µ–º–∞—Ö!

---

## üîÑ –ü–†–ò–ú–ï–ù–ï–ù–ò–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

### Vite HMR –ø—Ä–∏–º–µ–Ω–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ ‚úÖ

Frontend –æ–±–Ω–æ–≤–∏—Ç—Å—è —á–µ—Ä–µ–∑ Hot Module Reload –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞.

**–ü—Ä–æ—Å—Ç–æ –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ:**
- –ù–∞–∂–º–∏—Ç–µ **F5** –∏–ª–∏ **Ctrl+R**
- ‚úÖ –î–æ–ª–∂–Ω—ã –æ—Å—Ç–∞—Ç—å—Å—è –≤ —Å–∏—Å—Ç–µ–º–µ!

---

## ‚ú® –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –£–õ–£–ß–®–ï–ù–ò–Ø

### –¢–æ–∫–µ–Ω –∂–∏–≤–µ—Ç 24 —á–∞—Å–∞:

```javascript
{ expiresIn: '24h' }
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ–¥–ª–µ–Ω–∏–µ:

–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å refresh token –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–æ–¥–ª–µ–Ω–∏—è —Å–µ—Å—Å–∏–∏ (–±—É–¥—É—â–µ–µ —É–ª—É—á—à–µ–Ω–∏–µ).

---

## üéØ –ò–¢–û–ì–û

**–ü—Ä–æ–±–ª–µ–º–∞ –≤—ã–ª–µ—Ç–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ê

**–ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
1. ‚úÖ `src/api/auth.js` - validateToken()
2. ‚úÖ `src/contexts/AuthContext.jsx` - checkAuthStatus()

**–¢–µ–ø–µ—Ä—å:**
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ù–ï –≤—ã–ª–µ—Ç–∞–µ—Ç –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
- ‚úÖ –¢–æ–∫–µ–Ω —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏
- ‚úÖ –†–∞–±–æ—Ç–∞ –Ω–µ –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç—Å—è

---

**–û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ - –±–æ–ª—å—à–µ –Ω–µ –¥–æ–ª–∂–Ω–æ –≤—ã–±—Ä–∞—Å—ã–≤–∞—Ç—å!** üöÄ

---

_–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ persistence: 4 –æ–∫—Ç—è–±—Ä—è 2025, 19:40_

