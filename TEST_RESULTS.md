# üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Auth —Å–∏—Å—Ç–µ–º—ã

**–î–∞—Ç–∞:** 4 –æ–∫—Ç—è–±—Ä—è 2025, 18:14  
**–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç  
**Backend:** http://localhost:3001  
**–£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:** –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –ò–ª—å—è –ö—É–∑—å–º–∏–Ω (kiy026@yandex.ru)

---

## ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!

### –¢–ï–°–¢ 1: Login (–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ PASSED

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ HTTP Status: 200 OK
- ‚úÖ –¢–æ–∫–µ–Ω –ø–æ–ª—É—á–µ–Ω –∏–∑ `response.data.token`
- ‚úÖ –¢–æ–∫–µ–Ω —Å–æ—Ö—Ä–∞–Ω–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

**–î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
- **User ID:** 6
- **Email:** kiy026@yandex.ru
- **–ò–º—è:** –ò–ª—å—è –ö—É–∑—å–º–∏–Ω
- **–ö–æ–º–ø–∞–Ω–∏—è:** –Ω–µ —É–∫–∞–∑–∞–Ω–æ

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ JWT —Ç–æ–∫–µ–Ω–∞:**
```json
{
  "userId": 6,
  "email": "kiy026@yandex.ru",
  "firstname": "–ò–ª—å—è",
  "lastname": "–ö—É–∑—å–º–∏–Ω",
  "iat": 1728063245,
  "exp": 1728149645
}
```

**–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è —Ç–æ–∫–µ–Ω–∞:** 24 —á–∞—Å–∞ (–¥–æ 5 –æ–∫—Ç—è–±—Ä—è 2025, 18:14)

---

### –¢–ï–°–¢ 2: Logout —Å –≤–∞–ª–∏–¥–Ω—ã–º —Ç–æ–∫–µ–Ω–æ–º

**–°—Ç–∞—Ç—É—Å:** ‚úÖ PASSED

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ HTTP Status: 200 OK
- ‚úÖ –¢–æ–∫–µ–Ω –ø–µ—Ä–µ–¥–∞–Ω –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ `Authorization: Bearer <token>`
- ‚úÖ –°–µ—Å—Å–∏—è —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–∞ –∏–∑ –ë–î
- ‚úÖ –û—Ç–≤–µ—Ç: "–£—Å–ø–µ—à–Ω—ã–π –≤—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã"

---

### –¢–ï–°–¢ 3: Logout –±–µ–∑ —Ç–æ–∫–µ–Ω–∞ (Graceful degradation)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ PASSED

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ HTTP Status: 200 OK (–≤–º–µ—Å—Ç–æ 401!)
- ‚úÖ Logout —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –ë–ï–ó —Ç–æ–∫–µ–Ω–∞
- ‚úÖ –û—Ç–≤–µ—Ç: "–£—Å–ø–µ—à–Ω—ã–π –≤—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã"

**–≠—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ!** –†–∞–Ω—å—à–µ –≤–æ–∑–≤—Ä–∞—â–∞–ª–æ—Å—å:
- ‚ùå HTTP 401 Unauthorized
- ‚ùå "–¢–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω"

---

## üìä –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

| –¢–µ—Å—Ç | –†–µ–∑—É–ª—å—Ç–∞—Ç | –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è |
|------|-----------|------------------|
| Login –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ | ‚úÖ PASSED | ~2.3 —Å–µ–∫ |
| Logout —Å –≤–∞–ª–∏–¥–Ω—ã–º —Ç–æ–∫–µ–Ω–æ–º | ‚úÖ PASSED | ~0.2 —Å–µ–∫ |
| Logout –±–µ–∑ —Ç–æ–∫–µ–Ω–∞ | ‚úÖ PASSED | ~0.1 —Å–µ–∫ |
| **–ò–¢–û–ì–û** | **3/3 (100%)** | **~2.6 —Å–µ–∫** |

---

## üéØ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### Frontend –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
‚úÖ –¢–æ–∫–µ–Ω —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∏–∑ `response.data.token` (–Ω–µ –∏–∑ `accessToken`)  
‚úÖ –¢–æ–∫–µ–Ω –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ `Authorization: Bearer <token>`  
‚úÖ –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ 401

### Backend –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
‚úÖ Logout —Ä–∞–±–æ—Ç–∞–µ—Ç –ë–ï–ó —Ç–æ–∫–µ–Ω–∞ (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç success, –Ω–µ 401)  
‚úÖ Logout —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–º —Ç–æ–∫–µ–Ω–æ–º (graceful degradation)  
‚úÖ Logout —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –ë–î

---

## üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ Production

### –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:
- ‚úÖ –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ JWT —Ç–æ–∫–µ–Ω—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è
- ‚úÖ –°–µ—Å—Å–∏–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î (—Ç–∞–±–ª–∏—Ü–∞ `user_sessions`)
- ‚úÖ Logout –Ω–∞–¥–µ–∂–µ–Ω –∏ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ Graceful degradation –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å —Ç–æ–∫–µ–Ω–æ–º

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
- ‚ö†Ô∏è –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `NODE_TLS_REJECT_UNAUTHORIZED=0` –¥–ª—è Aiven Cloud
- ‚ö†Ô∏è JWT —Å–µ–∫—Ä–µ—Ç—ã –≤ production –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–ª–æ–∂–Ω–µ–µ
- ‚ö†Ô∏è –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ refresh —Ç–æ–∫–µ–Ω–æ–≤
- ‚ö†Ô∏è –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ–ª–Ω—É—é –º—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç—å (—Ç–∞–±–ª–∏—Ü—ã `tenants`, `user_tenants`)

---

## üìù –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!**

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é. –ü—Ä–æ–±–ª–µ–º–∞ —Å logout (401 Unauthorized) –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω–∞.

---

_–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω: 4 –æ–∫—Ç—è–±—Ä—è 2025, 18:14_  
_–í–µ—Ä—Å–∏—è: 2.3.0_

